<%# Banner %>
<div class="banner">
  <h2 class="speakitout">
    Spe@kitOut
    <span>Spe@kitOut</span>
    <span>Spe@kitOut</span>
    <span>will make you feel better</span>
  </h2>
</div>

<!-- Button trigger modal -->
<button type="button" class="btn btn-ghost" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
  New Article
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="staticBackdropLabel">New Article</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="md-form mb-5 string required article_title">
          <label class="form-label string required" data-error="wrong" data-success="right" for="article_title">Title</label>
          <input type="text" name="article[title]" id="article_title" class="form-control validate string required">
        </div>
        <div class="md-form mb-5 url optional article_url">
          <label class="form-label url optional" data-error="wrong" data-success="right" for="article_url">URL</label>
          <input type="email" id="article_url" class="form-control validate string url optional" name="article[url]">
        </div>
        <div class="md-form text required article_message">
          <label class="form-label text required" data-error="wrong" data-success="right" for="article_message">Content</label>
          <textarea type="text" id="article_message" class="form-control validate text required" name="article[message]"></textarea>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-ghost" data-bs-dismiss="modal">Close</button>
        <button type="button" name="commit" value="Post" data-disable-with="Create Article" class="btn btn-ghost">Post</button>
      </div>
    </div>
  </div>
</div>

<div class="container">

  <div class="d-flex justify-content-center">
    <%= link_to "New Article", new_article_path, class:"btn btn-ghost" %>
  </div>

  <% @articles.each do |article| %>
    <div class="card-trip my-4" data-controller="display-card-infos" data-display-card-infos-target="article">
      <%# article photo %>
      <div class="card-article">
        <%= article.photo.attached? ? (cl_image_tag article.photo.key, crop: :fill, class:"article-photo", data: { action: "click->display-card-infos#displayCard" }) : image_tag(asset_path("mirror.jpg"), class:"article-photo", data: { action: "click->display-card-infos#displayCard" }) %>
        <h2 data-action="click->display-card-infos#displayCard"><%= article.title %></h2>
      </div>
      <%# card infos %>
      <%= link_to article_path(article), class: "text-decoration:none" do %>
      <div class="card-trip-infos" data-display-card-infos-target="card">
        <div class="articles-content">
          <p><%= article.message.truncate(60)%>
            <%= link_to article_path(article), class:"click-me" do %>
              <i class="fa-solid fa-circle-plus"></i>
            <% end %>
          </p>
        </div>
      </div>
      <% end %>
    </div>
  <% end %>

</div>
