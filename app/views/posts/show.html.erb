<div class="container rounded-3 border new-post d-flex justify-content-center">
  <div class="col-11 py-3">
    <div class="d-flex align-content-center">
      <%= current_user.photo.attached? ? (cl_image_tag current_user.photo.key, crop: :fill, class: "rounded-circle avatar me-0") : image_tag(asset_path('https://kitt.lewagon.com/placeholder/users/ssaunier'), class: "rounded-circle avatar me-0") %>
      <span class="ms-3 d-flex align-items-center text-muted">Posted by <%= @post.user.nickname %> </span>
    </div>
    <div class="mt-3">
      <p class="fw-bold"> <%= @post.title %> </p>
      <p class="mt-1"> <%= @post.content %> </p>
      <div class="tool-bar mt-3">
        <%= link_to post_path, data: {turbo_method: :delete} do %>
          <i class="fa-solid fa-trash"></i>
        <% end %>
        <%= link_to edit_post_path(@post) do%>
          <i class="fa-solid fa-pen-to-square"></i>
        <% end %>
      </div>
    </div>
    <div class="mt-2 comment-block pb-3 border-bottom">
      <%= simple_form_for @reply, :url => post_replies_path(params[:id]), :method => :posts do |f| %>
        <%= f.input :content %>
        <%= f.button :submit %>
      <% end %>

    </div>
    <div class="comment-list">
      <div class="mt-3">
        <% @replies.each do |reply| %>
          <div class="d-flex align-content-center mt-3">
            <%= current_user.photo.attached? ? (cl_image_tag current_user.photo.key, crop: :fill, class: "rounded-circle avatar me-0") : image_tag(asset_path('https://kitt.lewagon.com/placeholder/users/ssaunier'), class: "rounded-circle avatar me-0") %>
            <div class="ms-3">
              <div class="d-flex text-muted">
                <span class="d-flex align-items-center"><%= @post.user.nickname %></span>
                <span class="mx-1">Â·</span>
                <span><%= time_ago_in_words(reply.created_at) %></span>
              </div>
              <p class="mt-1"> <%= reply.content %> </p>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
